{"version":3,"file":"wgl.js","sources":["../node_modules/wheel/index.js","../node_modules/bezier-easing/src/index.js","../node_modules/amator/index.js","../node_modules/panzoom/lib/kinetic.js","../node_modules/panzoom/lib/createEvent.js","../node_modules/panzoom/lib/textSlectionInterceptor.js","../node_modules/panzoom/lib/transform.js","../node_modules/panzoom/lib/svgController.js","../node_modules/panzoom/lib/domController.js","../node_modules/panzoom/index.js","../node_modules/ngraph.events/index.js","../src/Transform.js","../src/Element.js","../src/clap.js","../src/scene.js","../src/glUtils.js","../src/shaderGraph/index.js","../src/shaderGraph/panzoom.js","../src/shaderGraph/point.js","../src/points/makePointsProgram.js","../src/Color.js","../src/points/PointAccessor.js","../src/points/PointCollection.js","../src/points/Point.js","../src/lines/BaseLineCollection.js","../src/lines/makeLinesProgram.js","../src/lines/LineAccessor.js","../src/lines/LineCollection.js","../src/lines/WireAccessor.js","../src/lines/WireCollection.js","../src/isWebGLEnabled.js"],"sourcesContent":["/**\n * This module unifies handling of mouse whee event across different browsers\n *\n * See https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel?redirectlocale=en-US&redirectslug=DOM%2FMozilla_event_reference%2Fwheel\n * for more details\n *\n * Usage:\n *  var addWheelListener = require('wheel').addWheelListener;\n *  var removeWheelListener = require('wheel').removeWheelListener;\n *  addWheelListener(domElement, function (e) {\n *    // mouse wheel event\n *  });\n *  removeWheelListener(domElement, function);\n */\n// by default we shortcut to 'addEventListener':\n\nmodule.exports = addWheelListener;\n\n// But also expose \"advanced\" api with unsubscribe:\nmodule.exports.addWheelListener = addWheelListener;\nmodule.exports.removeWheelListener = removeWheelListener;\n\n\nvar prefix = \"\", _addEventListener, _removeEventListener, onwheel, support;\n\ndetectEventModel(typeof window !== 'undefined' && window,\n                typeof document !== 'undefined' && document);\n\nfunction addWheelListener( elem, callback, useCapture ) {\n    _addWheelListener( elem, support, callback, useCapture );\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n        _addWheelListener( elem, \"MozMousePixelScroll\", callback, useCapture );\n    }\n};\n\nfunction removeWheelListener( elem, callback, useCapture ) {\n    _removeWheelListener( elem, support, callback, useCapture );\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n        _removeWheelListener( elem, \"MozMousePixelScroll\", callback, useCapture );\n    }\n};\n\nfunction _addWheelListener( elem, eventName, callback, useCapture ) {\n  // TODO: in theory this anonymous function may result in incorrect\n  // unsubscription in some browsers. But in practice, I don't think we should\n  // worry too much about it (those browsers are on the way out)\n  elem[ _addEventListener ]( prefix + eventName, support == \"wheel\" ? callback : function( originalEvent ) {\n    !originalEvent && ( originalEvent = window.event );\n\n    // create a normalized event object\n    var event = {\n      // keep a ref to the original event object\n      originalEvent: originalEvent,\n      target: originalEvent.target || originalEvent.srcElement,\n      type: \"wheel\",\n      deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n      deltaX: 0,\n      delatZ: 0,\n      clientX: originalEvent.clientX,\n      clientY: originalEvent.clientY,\n      preventDefault: function() {\n        originalEvent.preventDefault ?\n            originalEvent.preventDefault() :\n            originalEvent.returnValue = false;\n      },\n      stopPropagation: function() {\n        if(originalEvent.stopPropagation)\n          originalEvent.stopPropagation();\n      },\n      stopImmediatePropagation: function() {\n        if(originalEvent.stopImmediatePropagation)\n          originalEvent.stopImmediatePropagation();\n      }\n    };\n\n    // calculate deltaY (and deltaX) according to the event\n    if ( support == \"mousewheel\" ) {\n      event.deltaY = - 1/40 * originalEvent.wheelDelta;\n      // Webkit also support wheelDeltaX\n      originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 * originalEvent.wheelDeltaX );\n    } else {\n      event.deltaY = originalEvent.detail;\n    }\n\n    // it's time to fire the callback\n    return callback( event );\n\n  }, useCapture || false );\n}\n\nfunction _removeWheelListener( elem, eventName, callback, useCapture ) {\n  elem[ _removeEventListener ]( prefix + eventName, callback, useCapture || false );\n}\n\nfunction detectEventModel(window, document) {\n  if ( window && window.addEventListener ) {\n      _addEventListener = \"addEventListener\";\n      _removeEventListener = \"removeEventListener\";\n  } else {\n      _addEventListener = \"attachEvent\";\n      _removeEventListener = \"detachEvent\";\n      prefix = \"on\";\n  }\n\n  if (document) {\n    // detect available wheel event\n    support = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n              document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n              \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n  } else {\n    support = \"wheel\";\n  }\n}\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  if (mX1 !== mY1 || mX2 !== mY2) {\n    for (var i = 0; i < kSplineTableSize; ++i) {\n      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    if (mX1 === mY1 && mX2 === mY2) {\n      return x; // linear\n    }\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","var BezierEasing = require('bezier-easing')\n\n// Predefined set of animations. Similar to CSS easing functions\nvar animations = {\n  ease:  BezierEasing(0.25, 0.1, 0.25, 1),\n  easeIn: BezierEasing(0.42, 0, 1, 1),\n  easeOut: BezierEasing(0, 0, 0.58, 1),\n  easeInOut: BezierEasing(0.42, 0, 0.58, 1),\n  linear: BezierEasing(0, 0, 1, 1)\n}\n\n\nmodule.exports = animate;\n\nfunction animate(source, target, options) {\n  var start= Object.create(null)\n  var diff = Object.create(null)\n  options = options || {}\n  // We let clients specify their own easing function\n  var easing = (typeof options.easing === 'function') ? options.easing : animations[options.easing]\n\n  // if nothing is specified, default to ease (similar to CSS animations)\n  if (!easing) {\n    if (options.easing) {\n      console.warn('Unknown easing function in amator: ' + options.easing);\n    }\n    easing = animations.ease\n  }\n\n  var step = typeof options.step === 'function' ? options.step : noop\n  var done = typeof options.done === 'function' ? options.done : noop\n\n  var scheduler = getScheduler(options.scheduler)\n\n  var keys = Object.keys(target)\n  keys.forEach(function(key) {\n    start[key] = source[key]\n    diff[key] = target[key] - source[key]\n  })\n\n  var durationInMs = options.duration || 400\n  var durationInFrames = Math.max(1, durationInMs * 0.06) // 0.06 because 60 frames pers 1,000 ms\n  var previousAnimationId\n  var frame = 0\n\n  previousAnimationId = scheduler.next(loop)\n\n  return {\n    cancel: cancel\n  }\n\n  function cancel() {\n    scheduler.cancel(previousAnimationId)\n    previousAnimationId = 0\n  }\n\n  function loop() {\n    var t = easing(frame/durationInFrames)\n    frame += 1\n    setValues(t)\n    if (frame <= durationInFrames) {\n      previousAnimationId = scheduler.next(loop)\n      step(source)\n    } else {\n      previousAnimationId = 0\n      setTimeout(function() { done(source) }, 0)\n    }\n  }\n\n  function setValues(t) {\n    keys.forEach(function(key) {\n      source[key] = diff[key] * t + start[key]\n    })\n  }\n}\n\nfunction noop() { }\n\nfunction getScheduler(scheduler) {\n  if (!scheduler) {\n    var canRaf = typeof window !== 'undefined' && window.requestAnimationFrame\n    return canRaf ? rafScheduler() : timeoutScheduler()\n  }\n  if (typeof scheduler.next !== 'function') throw new Error('Scheduler is supposed to have next(cb) function')\n  if (typeof scheduler.cancel !== 'function') throw new Error('Scheduler is supposed to have cancel(handle) function')\n\n  return scheduler\n}\n\nfunction rafScheduler() {\n  return {\n    next: window.requestAnimationFrame.bind(window),\n    cancel: window.cancelAnimationFrame.bind(window)\n  }\n}\n\nfunction timeoutScheduler() {\n  return {\n    next: function(cb) {\n      return setTimeout(cb, 1000/60)\n    },\n    cancel: function (id) {\n      return clearTimeout(id)\n    }\n  }\n}\n","/**\n * Allows smooth kinetic scrolling of the surface\n */\nmodule.exports = kinetic;\n\nfunction kinetic(getPoint, scroll, settings) {\n  if (typeof settings !== 'object') {\n    // setting could come as boolean, we should ignore it, and use an object.\n    settings = {}\n  }\n\n  var minVelocity = (typeof settings.minVelocity === 'number') ? settings.minVelocity : 5\n  var amplitude = (typeof settings.amplitude === 'number') ? settings.amplitude : 0.25\n\n  var lastPoint\n  var timestamp\n  var timeConstant = 342\n\n  var ticker\n  var vx, targetX, ax;\n  var vy, targetY, ay;\n\n  var raf\n\n  return {\n    start: start,\n    stop: stop,\n    cancel: dispose\n  }\n\n  function dispose() {\n    window.clearInterval(ticker)\n    window.cancelAnimationFrame(raf)\n  }\n\n  function start() {\n    lastPoint = getPoint()\n\n    ax = ay = vx = vy = 0\n    timestamp = new Date()\n\n    window.clearInterval(ticker)\n    window.cancelAnimationFrame(raf)\n\n    // we start polling the point position to accumulate velocity\n    // Once we stop(), we will use accumulated velocity to keep scrolling\n    // an object.\n    ticker = window.setInterval(track, 100);\n  }\n\n  function track() {\n    var now = Date.now();\n    var elapsed = now - timestamp;\n    timestamp = now;\n\n    var currentPoint = getPoint()\n\n    var dx = currentPoint.x - lastPoint.x\n    var dy = currentPoint.y - lastPoint.y\n\n    lastPoint = currentPoint\n\n    var dt = 1000 / (1 + elapsed)\n\n    // moving average\n    vx = 0.8 * dx * dt + 0.2 * vx\n    vy = 0.8 * dy * dt + 0.2 * vy\n  }\n\n  function stop() {\n    window.clearInterval(ticker);\n    window.cancelAnimationFrame(raf)\n\n    var currentPoint = getPoint()\n\n    targetX = currentPoint.x\n    targetY = currentPoint.y\n    timestamp = Date.now()\n\n    if (vx < -minVelocity || vx > minVelocity) {\n      ax = amplitude * vx\n      targetX += ax\n    }\n\n    if (vy < -minVelocity || vy > minVelocity) {\n      ay = amplitude * vy\n      targetY += ay\n    }\n\n    raf = window.requestAnimationFrame(autoScroll);\n  }\n\n  function autoScroll() {\n    var elapsed = Date.now() - timestamp\n\n    var moving = false\n    var dx = 0\n    var dy = 0\n\n    if (ax) {\n      dx = -ax * Math.exp(-elapsed / timeConstant)\n\n      if (dx > 0.5 || dx < -0.5) moving = true\n      else dx = ax = 0\n    }\n\n    if (ay) {\n      dy = -ay * Math.exp(-elapsed / timeConstant)\n\n      if (dy > 0.5 || dy < -0.5) moving = true\n      else dy = ay = 0\n    }\n\n    if (moving) {\n      scroll(targetX + dx, targetY + dy)\n      raf = window.requestAnimationFrame(autoScroll);\n    }\n  }\n\n}\n","/* global Event */\nmodule.exports = createEvent;\n\nvar isIE = typeof Event !== 'function'\n\n/**\n * Constructs custom event. Works in IE too\n */\nfunction createEvent(name) {\n  if (isIE) {\n    var evt = document.createEvent('CustomEvent')\n    evt.initCustomEvent(name, true, true, undefined)\n    return evt\n  } else {\n    return new Event(name, {\n      bubbles: true\n    })\n  }\n}\n","/**\n * Disallows selecting text.\n */\nmodule.exports = createTextSelectionInterceptor\n\nfunction createTextSelectionInterceptor() {\n  var dragObject\n  var prevSelectStart\n  var prevDragStart\n\n  return {\n    capture: capture,\n    release: release\n  }\n\n  function capture(domObject) {\n    prevSelectStart = window.document.onselectstart\n    prevDragStart = window.document.ondragstart\n\n    window.document.onselectstart = disabled\n\n    dragObject = domObject\n    dragObject.ondragstart = disabled\n  }\n\n  function release() {\n    window.document.onselectstart = prevSelectStart\n    if (dragObject) dragObject.ondragstart = prevDragStart\n  }\n}\n\nfunction disabled(e) {\n  e.stopPropagation()\n  return false\n}\n","module.exports = Transform;\n\nfunction Transform() {\n  this.x = 0;\n  this.y = 0;\n  this.scale = 1;\n}\n","module.exports = makeSvgController\n\nfunction makeSvgController(svgElement) {\n  var elementValid = (svgElement instanceof SVGElement)\n  if (!elementValid) {\n    throw new Error('svg element is required for svg.panzoom to work')\n  }\n\n  var owner = svgElement.ownerSVGElement\n  if (!owner) {\n    throw new Error(\n      'Do not apply panzoom to the root <svg> element. ' +\n      'Use its child instead (e.g. <g></g>). ' +\n      'As of March 2016 only FireFox supported transform on the root element')\n  }\n\n  owner.setAttribute('tabindex', 1); // TODO: not sure if this is really polite\n\n  var api = {\n    getBBox: getBBox,\n    getScreenCTM: getScreenCTM,\n    getOwner: getOwner,\n    applyTransform: applyTransform,\n  }\n  \n  return api\n\n  function getOwner() {\n    return owner\n  }\n\n  function getBBox() {\n    var bbox =  svgElement.getBBox()\n    return {\n      left: bbox.x,\n      top: bbox.y,\n      width: bbox.width,\n      height: bbox.height,\n    }\n  }\n\n  function getScreenCTM() {\n    return owner.getScreenCTM()\n  }\n\n  function applyTransform(transform) {\n    svgElement.setAttribute('transform', 'matrix(' +\n      transform.scale + ' 0 0 ' +\n      transform.scale + ' ' +\n      transform.x + ' ' + transform.y + ')')\n  }\n}","module.exports = makeSvgController\n\nfunction makeSvgController(domElement) {\n  var elementValid = (domElement instanceof HTMLElement)\n  if (!elementValid) {\n    throw new Error('svg element is required for svg.panzoom to work')\n  }\n\n  var owner = domElement.parentElement\n  if (!owner) {\n    throw new Error(\n      'Do not apply panzoom to the detached DOM element. '\n    )\n  }\n\n  owner.setAttribute('tabindex', 1); // TODO: not sure if this is really polite\n\n  var api = {\n    getBBox: getBBox,\n    getOwner: getOwner,\n    applyTransform: applyTransform,\n  }\n  \n  return api\n\n  function getOwner() {\n    return owner\n  }\n\n  function getBBox() {\n    // TODO: We should probably cache this?\n    return  {\n      left: 0,\n      top: 0,\n      width: domElement.clientWidth,\n      height: domElement.clientHeight\n    }\n  }\n\n  function applyTransform(transform) {\n    // TODO: Should we cache this?\n    domElement.style.transformOrigin = '0 0 0';\n    domElement.style.transform = 'matrix(' +\n      transform.scale + ', 0, 0, ' +\n      transform.scale + ', ' +\n      transform.x + ', ' + transform.y + ')'\n  }\n}","/* globals SVGElement */\n/**\n * Allows to drag and zoom svg elements\n */\nvar wheel = require('wheel')\nvar animate = require('amator');\nvar kinetic = require('./lib/kinetic.js')\nvar createEvent = require('./lib/createEvent.js')\nvar preventTextSelection = require('./lib/textSlectionInterceptor.js')()\nvar Transform = require('./lib/transform.js');\nvar makeSvgController = require('./lib/svgController.js')\nvar makeDomController = require('./lib/domController.js')\n\nvar defaultZoomSpeed = 0.065\nvar defaultDoubleTapZoomSpeed = 1.75\nvar doubleTapSpeedInMS = 300\n\nmodule.exports = createPanZoom;\n\n/**\n * Creates a new instance of panzoom, so that an object can be panned and zoomed\n * \n * @param {DOMElement} domElement where panzoom should be attached.\n * @param {Object} options that configure behavior.\n */\nfunction createPanZoom(domElement, options) {\n  options = options || {}\n\n  var domController = options.controller\n\n  if (!domController) {\n    if (domElement instanceof SVGElement) {\n      domController = makeSvgController(domElement)\n    }\n\n    if (domElement instanceof HTMLElement) {\n      domController = makeDomController(domElement)\n    }\n  }\n\n  if (!domController) {\n    throw new Error('Cannot create panzoom for the current type of dom element')\n  }\n  var owner = domController.getOwner()\n\n  var isDirty = false\n  var transform = new Transform()\n\n  var bounds = options.bounds\n  var maxZoom = typeof options.maxZoom === 'number' ? options.maxZoom : Number.POSITIVE_INFINITY\n  var minZoom = typeof options.minZoom === 'number' ? options.minZoom : 0\n\n  var boundsPadding = typeof options.boundsPaddding === 'number' ? options.boundsPaddding : 0.05\n  var zoomDoubleClickSpeed = typeof options.zoomDoubleClickSpeed === 'number' ? options.zoomDoubleClickSpeed : defaultDoubleTapZoomSpeed\n  var beforeWheel = options.beforeWheel || noop\n  var speed = typeof options.zoomSpeed === 'number' ? options.zoomSpeed : defaultZoomSpeed\n\n  validateBounds(bounds)\n\n  if (options.autocenter) {\n    autocenter()\n  }\n\n  var frameAnimation\n\n  var lastTouchEndTime = 0\n\n  var touchInProgress = false\n\n  // We only need to fire panstart when actual move happens\n  var panstartFired = false\n\n  // cache mouse coordinates here\n  var mouseX\n  var mouseY\n\n  var pinchZoomLength\n\n  var smoothScroll\n  if ('smoothScroll' in options && !options.smoothScroll) {\n    // If user explicitly asked us not to use smooth scrolling, we obey\n    smoothScroll = rigidScroll() \n  } else {\n    // otherwise we use forward smoothScroll settings to kinetic API\n    // which makes scroll smoothing.\n    smoothScroll = kinetic(getPoint, scroll, options.smoothScroll)\n  }\n\n  var moveByAnimation\n  var zoomToAnimation\n\n  var multitouch\n\n  listenForEvents()\n\n  return {\n    dispose: dispose,\n    moveBy: internalMoveBy,\n    moveTo: moveTo,\n    centerOn: centerOn,\n    zoomTo: publicZoomTo,\n    zoomAbs: zoomAbs,\n    getTransform: getTransformModel,\n    showRectangle: showRectangle\n  }\n\n  function showRectangle(rect) {\n    // TODO: this duplicates autocenter. I think autocenter should go.\n    var w = owner.clientWidth\n    var h = owner.clientHeight\n    var rectWidth = rect.right - rect.left;\n    var rectHeight = rect.bottom - rect.top;\n    var dh = h/rectHeight\n    var dw = w/rectWidth\n    var scale = Math.min(dw, dh)\n    transform.x = -(rect.left + rectWidth/2) * scale + w/2\n    transform.y = -(rect.top + rectHeight/2) * scale + h/2\n    transform.scale = scale\n  }\n\n  function autocenter() {\n    var w // width of the parent\n    var h // height of the parent\n    var left = 0\n    var top = 0\n    var sceneBoundingBox = getBoundingBox()\n    if (sceneBoundingBox) {\n      // If we have bounding box - use it.\n      left = sceneBoundingBox.left\n      top = sceneBoundingBox.top\n      w = sceneBoundingBox.right - sceneBoundingBox.left\n      h = sceneBoundingBox.bottom - sceneBoundingBox.top\n    } else {\n      // otherwise just use whatever space we have\n      w = owner.clientWidth\n      h = owner.clientHeight\n    }\n    var bbox = domController.getBBox()\n    var dh = h/bbox.height\n    var dw = w/bbox.width\n    var scale = Math.min(dw, dh)\n    transform.x = -(bbox.left + bbox.width/2) * scale + w/2 + left\n    transform.y = -(bbox.top + bbox.height/2) * scale + h/2 + top\n    transform.scale = scale\n  }\n\n  function getTransformModel() {\n    // TODO: should this be read only?\n    return transform\n  }\n\n  function getPoint() {\n    return {\n      x: transform.x,\n      y: transform.y\n    }\n  }\n\n  function moveTo(x, y) {\n    transform.x = x\n    transform.y = y\n\n    keepTransformInsideBounds()\n\n    triggerEvent('pan')\n    makeDirty()\n  }\n\n  function moveBy(dx, dy) {\n    moveTo(transform.x + dx, transform.y + dy);\n  }\n\n  function keepTransformInsideBounds() {\n    var boundingBox = getBoundingBox()\n    if (!boundingBox) return\n\n    var adjusted = false\n    var clientRect = getClientRect()\n\n    var diff = boundingBox.left - clientRect.right;\n    if (diff > 0) {\n      transform.x += diff\n      adjusted = true\n    }\n    // check the other side:\n    diff = boundingBox.right - clientRect.left\n    if (diff < 0) {\n      transform.x += diff\n      adjusted = true\n    }\n\n    // y axis:\n    diff = boundingBox.top - clientRect.bottom;\n    if (diff > 0) {\n      // we adjust transform, so that it matches exactly our boinding box:\n      // transform.y = boundingBox.top - (boundingBox.height + boundingBox.y) * transform.scale =>\n      // transform.y = boundingBox.top - (clientRect.bottom - transform.y) =>\n      // transform.y = diff + transform.y =>\n      transform.y += diff\n      adjusted = true\n    }\n\n    diff = boundingBox.bottom - clientRect.top;\n    if (diff < 0) {\n      transform.y += diff\n      adjusted = true\n    }\n    return adjusted\n  }\n\n  /**\n   * Returns bounding box that should be used to restrict scene movement.\n   */\n  function getBoundingBox() {\n    if (!bounds) return // client does not want to restrict movement\n\n    if (typeof bounds === 'boolean') {\n      // for boolean type we use parent container bounds\n      var sceneWidth = owner.clientWidth\n      var sceneHeight = owner.clientHeight\n\n      return {\n        left: sceneWidth * boundsPadding,\n        top: sceneHeight * boundsPadding,\n        right: sceneWidth * (1 - boundsPadding),\n        bottom: sceneHeight * (1 - boundsPadding),\n      }\n    }\n\n    return bounds\n  }\n\n  function getClientRect() {\n    var bbox = domController.getBBox()\n    var leftTop = client(bbox.left, bbox.top)\n\n    return {\n      left: leftTop.x,\n      top: leftTop.y,\n      right: bbox.width * transform.scale + leftTop.x,\n      bottom: bbox.height * transform.scale + leftTop.y\n    }\n  }\n\n  function client(x, y) {\n    return {\n      x: (x * transform.scale) + transform.x,\n      y: (y * transform.scale) + transform.y\n    }\n  }\n\n  function makeDirty() {\n    isDirty = true\n    frameAnimation = window.requestAnimationFrame(frame)\n  }\n\n  function zoomByRatio(clientX, clientY, ratio) {\n    if (isNaN(clientX) || isNaN(clientY) || isNaN(ratio)) {\n      throw new Error('zoom requires valid numbers');\n    }\n\n    var newScale = transform.scale * ratio\n\n    if (newScale > maxZoom || newScale < minZoom) {\n      // outside of allowed bounds\n      return\n    }\n\n    var parentScale = 1\n    var parentOffsetX = 0\n    var parentOffsetY = 0\n\n    if (domController.getScreenCTM) {\n      var parentCTM = domController.getScreenCTM()\n      parentScale = parentCTM.a\n      parentOffsetX = parentCTM.e\n      parentOffsetY = parentCTM.f\n    }\n\n    var x = clientX * parentScale - parentOffsetX\n    var y = clientY * parentScale - parentOffsetY\n\n    transform.x = x - ratio * (x - transform.x)\n    transform.y = y - ratio * (y - transform.y)\n\n    var transformAdjusted = keepTransformInsideBounds()\n    if (!transformAdjusted) transform.scale *= ratio\n\n    triggerEvent('zoom')\n\n    makeDirty()\n  }\n\n  function zoomAbs(clientX, clientY, zoomLevel) {\n    var ratio = zoomLevel / transform.scale\n    zoomByRatio(clientX, clientY, ratio)\n  }\n\n  function centerOn(ui) {\n    var parent = ui.ownerSVGElement\n    if (!parent) throw new Error('ui element is required to be within the scene')\n\n    var clientRect = ui.getBoundingClientRect()\n    var cx = clientRect.left + clientRect.width/2\n    var cy = clientRect.top + clientRect.height/2\n\n    var container = parent.getBoundingClientRect()\n    var dx = container.width/2 - cx\n    var dy = container.height/2 - cy\n\n    internalMoveBy(dx, dy, true)\n  }\n\n  function internalMoveBy(dx, dy, smooth) {\n    if (!smooth) {\n      return moveBy(dx, dy)\n    }\n\n    if (moveByAnimation) moveByAnimation.cancel()\n\n    var from = { x: 0, y: 0 }\n    var to = { x: dx, y : dy }\n    var lastX = 0\n    var lastY = 0\n\n    moveByAnimation = animate(from, to, {\n      step: function(v) {\n        moveBy(v.x - lastX, v.y - lastY)\n\n        lastX = v.x\n        lastY = v.y\n      }\n    })\n  }\n\n  function scroll(x, y) {\n    cancelZoomAnimation()\n    moveTo(x, y)\n  }\n\n  function dispose() {\n    wheel.removeWheelListener(domElement, onMouseWheel)\n    owner.removeEventListener('mousedown', onMouseDown)\n    owner.removeEventListener('keydown', onKeyDown)\n    owner.removeEventListener('dblclick', onDoubleClick)\n    if (frameAnimation) {\n      window.cancelAnimationFrame(frameAnimation)\n      frameAnimation = 0;\n    }\n\n    smoothScroll.cancel()\n\n    releaseDocumentMouse()\n    releaseTouches()\n\n    triggerPanEnd()\n  }\n\n  function listenForEvents() {\n    owner.addEventListener('mousedown', onMouseDown)\n    owner.addEventListener('dblclick', onDoubleClick)\n    owner.addEventListener('touchstart', onTouch)\n    owner.addEventListener('keydown', onKeyDown)\n    wheel.addWheelListener(owner, onMouseWheel)\n\n    makeDirty()\n  }\n\n\n  function frame() {\n    if (isDirty) applyTransform()\n  }\n\n  function applyTransform() {\n    isDirty = false\n\n    // TODO: Should I allow to cancel this?\n    domController.applyTransform(transform);\n\n    triggerEvent('transform')\n    frameAnimation = 0\n  }\n\n  function onKeyDown(e) {\n    var x = 0, y = 0, z = 0\n    if (e.keyCode === 38) {\n      y = 1 // up\n    } else if (e.keyCode === 40) {\n      y = -1 // down\n    } else if (e.keyCode === 37) {\n      x = 1 // left\n    } else if (e.keyCode === 39) {\n      x = -1 // right\n    } else if (e.keyCode === 189 || e.keyCode === 109) { // DASH or SUBTRACT\n      z = 1 // `-` -  zoom out\n    } else if (e.keyCode === 187 || e.keyCode === 107) { // EQUAL SIGN or ADD\n      z = -1 // `=` - zoom in (equal sign on US layout is under `+`)\n    }\n\n    if (x || y) {\n      e.preventDefault()\n      e.stopPropagation()\n\n      var clientRect = owner.getBoundingClientRect()\n      // movement speed should be the same in both X and Y direction:\n      var offset = Math.min(clientRect.width, clientRect.height)\n      var moveSpeedRatio = 0.05\n      var dx = offset * moveSpeedRatio * x\n      var dy = offset * moveSpeedRatio * y\n\n      // TODO: currently we do not animate this. It could be better to have animation\n      internalMoveBy(dx, dy)\n    }\n\n    if (z) {\n      var scaleMultiplier = getScaleMultiplier(z)\n      publicZoomTo(owner.clientWidth/2, owner.clientHeight/2, scaleMultiplier)\n    }\n  }\n\n  function onTouch(e) {\n    if (e.touches.length === 1) {\n      return handleSignleFingerTouch(e, e.touches[0])\n    } else if (e.touches.length === 2) {\n      // handleTouchMove() will care about pinch zoom.\n      e.stopPropagation()\n      e.preventDefault()\n\n      pinchZoomLength = getPinchZoomLength(e.touches[0], e.touches[1])\n      multitouch  = true;\n      startTouchListenerIfNeeded()\n    }\n  }\n\n  function handleSignleFingerTouch(e) {\n    e.stopPropagation()\n    e.preventDefault()\n\n    var touch = e.touches[0]\n    mouseX = touch.clientX\n    mouseY = touch.clientY\n\n    startTouchListenerIfNeeded()\n  }\n\n  function startTouchListenerIfNeeded() {\n    if (!touchInProgress) {\n      touchInProgress = true\n      document.addEventListener('touchmove', handleTouchMove)\n      document.addEventListener('touchend', handleTouchEnd)\n      document.addEventListener('touchcancel', handleTouchEnd)\n    }\n  }\n\n  function handleTouchMove(e) {\n\n    if (e.touches.length === 1) {\n      e.stopPropagation()\n      var touch = e.touches[0]\n\n      var dx = touch.clientX - mouseX\n      var dy = touch.clientY - mouseY\n\n      if (dx !== 0 && dy !== 0) {\n        triggerPanStart()\n      }\n      mouseX = touch.clientX\n      mouseY = touch.clientY\n      internalMoveBy(dx, dy)\n    } else if (e.touches.length === 2) {\n      // it's a zoom, let's find direction\n      multitouch = true;\n      var t1 = e.touches[0]\n      var t2 = e.touches[1]\n      var currentPinchLength = getPinchZoomLength(t1, t2)\n\n      var delta = 0\n      if (currentPinchLength < pinchZoomLength) {\n        delta = 1\n      } else if (currentPinchLength > pinchZoomLength) {\n        delta = -1\n      }\n\n      var scaleMultiplier = getScaleMultiplier(delta)\n\n      mouseX = (t1.clientX + t2.clientX)/2\n      mouseY = (t1.clientY + t2.clientY)/2\n\n      publicZoomTo(mouseX, mouseY, scaleMultiplier)\n\n      pinchZoomLength = currentPinchLength\n      e.stopPropagation()\n      e.preventDefault()\n    }\n  }\n\n  function handleTouchEnd(e) {\n    if (e.touches.length > 0) {\n      mouseX = e.touches[0].clientX\n      mouseY = e.touches[0].clientY\n    } else {\n      var now = new Date()\n      if (now - lastTouchEndTime < doubleTapSpeedInMS) {\n        smoothZoom(mouseX, mouseY, zoomDoubleClickSpeed)\n      }\n\n      lastTouchEndTime = now\n\n      touchInProgress = false\n      triggerPanEnd()\n      releaseTouches()\n    }\n  }\n\n  function getPinchZoomLength(finger1, finger2) {\n    return (finger1.clientX - finger2.clientX) * (finger1.clientX - finger2.clientX) +\n      (finger1.clientY - finger2.clientY) * (finger1.clientY - finger2.clientY)\n  }\n\n  function onDoubleClick(e) {\n    smoothZoom(e.clientX, e.clientY, zoomDoubleClickSpeed)\n\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  function onMouseDown(e) {\n    if (touchInProgress) {\n      // modern browsers will fire mousedown for touch events too\n      // we do not want this: touch is handled separately.\n      e.stopPropagation()\n      return false;\n    }\n    // for IE, left click == 1\n    // for Firefox, left click == 0\n    var isLeftButton = ((e.button === 1 && window.event !== null) || e.button === 0)\n    if (!isLeftButton) return\n\n    mouseX = e.clientX\n    mouseY = e.clientY\n\n    // We need to listen on document itself, since mouse can go outside of the\n    // window, and we will loose it\n    document.addEventListener('mousemove', onMouseMove)\n    document.addEventListener('mouseup', onMouseUp)\n\n    preventTextSelection.capture(e.target || e.srcElement)\n\n    return false\n  }\n\n  function onMouseMove(e) {\n    // no need to worry about mouse events when touch is happening\n    if (touchInProgress) return\n\n    triggerPanStart()\n\n    var dx = e.clientX - mouseX\n    var dy = e.clientY - mouseY\n\n    mouseX = e.clientX\n    mouseY = e.clientY\n\n    internalMoveBy(dx, dy)\n  }\n\n  function onMouseUp() {\n    preventTextSelection.release()\n    triggerPanEnd()\n    releaseDocumentMouse()\n  }\n\n  function releaseDocumentMouse() {\n    document.removeEventListener('mousemove', onMouseMove)\n    document.removeEventListener('mouseup', onMouseUp)\n    panstartFired = false\n  }\n\n  function releaseTouches() {\n    document.removeEventListener('touchmove', handleTouchMove)\n    document.removeEventListener('touchend', handleTouchEnd)\n    document.removeEventListener('touchcancel', handleTouchEnd)\n    panstartFired = false\n    multitouch = false\n  }\n\n  function onMouseWheel(e) {\n    // if client does not want to handle this event - just ignore the call\n    if (beforeWheel(e)) return\n\n    smoothScroll.cancel()\n\n    var scaleMultiplier = getScaleMultiplier(e.deltaY)\n\n    if (scaleMultiplier !== 1) {\n      publicZoomTo(e.clientX, e.clientY, scaleMultiplier)\n      e.preventDefault()\n    }\n  }\n\n  function smoothZoom(clientX, clientY, scaleMultiplier) {\n      var fromValue = transform.scale\n      var from = {scale: fromValue}\n      var to = {scale: scaleMultiplier * fromValue}\n\n      smoothScroll.cancel()\n      cancelZoomAnimation()\n\n      // TODO: should consolidate this and publicZoomTo\n      triggerEvent('zoom')\n\n      zoomToAnimation = animate(from, to, {\n        step: function(v) {\n          zoomAbs(clientX, clientY, v.scale)\n        }\n      })\n  }\n\n  function publicZoomTo(clientX, clientY, scaleMultiplier) {\n      smoothScroll.cancel()\n      cancelZoomAnimation()\n      return zoomByRatio(clientX, clientY, scaleMultiplier)\n  }\n\n  function cancelZoomAnimation() {\n      if (zoomToAnimation) {\n          zoomToAnimation.cancel()\n          zoomToAnimation = null\n      }\n  }\n\n  function getScaleMultiplier(delta) {\n    var scaleMultiplier = 1\n    if (delta > 0) { // zoom out\n      scaleMultiplier = (1 - speed)\n    } else if (delta < 0) { // zoom in\n      scaleMultiplier = (1 + speed)\n    }\n\n    return scaleMultiplier\n  }\n\n  function triggerPanStart() {\n    if (!panstartFired) {\n      triggerEvent('panstart')\n      panstartFired = true\n      smoothScroll.start()\n    }\n  }\n\n  function triggerPanEnd() {\n    if (panstartFired) {\n      // we should never run smooth scrolling if it was multitouch (pinch zoom animation):\n      if (!multitouch) smoothScroll.stop()\n      triggerEvent('panend')\n    }\n  }\n\n  function triggerEvent(name) {\n    var event = createEvent(name)\n    domElement.dispatchEvent(event)\n  }\n}\n\nfunction noop() { }\n\nfunction validateBounds(bounds) {\n  var boundsType = typeof bounds\n  if (boundsType === 'undefined' || boundsType === 'boolean') return // this is okay\n  // otherwise need to be more thorough:\n  var validBounds = isNumber(bounds.left) && isNumber(bounds.top) &&\n    isNumber(bounds.bottom) && isNumber(bounds.right)\n\n  if (!validBounds) throw new Error('Bounds object is not valid. It can be: ' +\n    'undefined, boolean (true|false) or an object {left, top, right, bottom}')\n}\n\nfunction isNumber(x) {\n  return Number.isFinite(x)\n}\n\n// IE 11 does not support isNaN:\nfunction isNaN(value) {\n  if (Number.isNaN) {\n    return Number.isNaN(value)\n  }\n\n  return value !== value\n}\n\nfunction rigidScroll() {\n  return {\n    start: noop,\n    stop: noop,\n    cancel: noop\n  }\n}","module.exports = function(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","class Transform {\n  constructor(scale, dx, dy) {\n    scale = scale || 1;\n    dx = dx || 0;\n    dy = dy || 0;\n    this._array = [\n      scale, 0,  0, 0,\n      0, scale,  0, 0,\n      0, 0,  1, 0,\n      dx, dy,  0, 1\n    ]\n  }\n\n  multiply(a, b) {\n    var scale = a.scale * b.scale;\n    var dx = a.scale * b.dx + a.dx;\n    var dy = a.scale * b.dy + a.dy;\n\n    this.scale = scale;\n    this.dx = dx;\n    this.dy = dy;\n\n    return this;\n  }\n\n  get scale() {\n    return this._array[0];\n  }\n\n  get dx() {\n    return this._array[12];\n  }\n\n  get dy() {\n    return this._array[13];\n  }\n\n  set dx(newDx) {\n    this._array[12] = newDx;\n  }\n  \n  set dy(newDy) {\n    this._array[13] = newDy;\n  }\n\n  set scale(newScale) {\n    this._array[0] = newScale;\n    this._array[5] = newScale;\n  }\n\n  copyTo(dst) {\n    copyArray(this._array, dst._array);\n    return this;\n  }\n\n  getArray() {\n    return this._array;\n  }\n}\n\nexport default Transform;\n\nfunction copyArray(from, to) {\n  if (from.length !== to.length) {\n    throw new Error('Array length mismatch');\n  }\n\n  for(var i = 0; i < from.length; ++i) {\n    to[i] = from[i];\n  }\n}","import Transform from './Transform';\n\n/**\n * represents a single element in the scene tree\n */\nclass Element {\n  constructor() {\n    this.children = [];\n    this.transform = new Transform();\n\n    // Stores transformation to the \"world\" coordinates. If this element has\n    // no parent, this object is equal to `this.transform`\n    this.worldTransform = new Transform();\n    this.worldTransformNeedsUpdate = true;\n    this.type = 'Element';\n    this.scene = null;\n  }\n\n  appendChild(child, sendToBack) {\n    child.parent = this;\n    if (sendToBack) {\n      // back of z-index\n      this.children.unshift(child);\n    } else {\n      this.children.push(child);\n    }\n    if (child.bindScene) {\n      child.bindScene(this.scene);\n    }\n\n    if (this.scene) this.scene.renderFrame();\n  }\n\n  bindScene(scene) {\n    this.scene = scene;\n  }\n\n  traverse(enterCallback, exitCallback) {\n    enterCallback(this);\n\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this.children[i];\n      child.traverse(enterCallback, exitCallback);\n    }\n\n    if (exitCallback) exitCallback(this);\n  }\n\n  removeChild(child) {\n    // TODO: should this be faster?\n    let childIdx = this.children.indexOf(child);\n    if (childIdx > -1) {\n      this.children.splice(childIdx, 1);\n    }\n\n    if (this.scene) this.scene.renderFrame();\n    this.scene = null;\n  }\n\n  updateWorldTransform(force) {\n    if (this.worldTransformNeedsUpdate || force) {\n      if (!this.parent) {\n        this.transform.copyTo(this.worldTransform);\n      } else {\n        this.worldTransform.multiply(this.parent.worldTransform, this.transform)\n      }\n\n      this.worldTransformNeedsUpdate = false;\n      force = true; // We have to update children now.\n    }\n\n    let wasDirty = force;\n\n    var children = this.children;\n    for (var i = 0; i < children.length; i++ ) {\n       wasDirty = children[i].updateWorldTransform(force) || wasDirty;\n    }\n\n    return wasDirty;\n  }\n\n  draw(gl, screen) {\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this.children[i];\n      child.draw(gl, screen);\n    }\n  }\n\n  dispose() {\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this.children[i];\n      child.dispose();\n    }\n  }\n}\n\nexport default Element;","var config = {\n  maxSingleTouchTime: 300, // ms\n  singleTapDistanceSquared: 25 // within 5px we consider it as a single tap\n}\n\nexport default onClap;\n\nfunction onClap(element, callback, ctx) {\n  var touchStartTime = new Date();\n  var startPos\n\n  element.addEventListener('click', invokeHandler)\n\n  element.addEventListener('touchend', handleTouchEnd)\n  element.addEventListener('touchstart', handleTouchStart)\n\n  return disposePrevHandler;\n\n  function handleTouchStart(e) {\n    var touches = e.touches\n\n    if (touches.length === 1) {\n      touchStartTime = new Date()\n      startPos = {\n        x: e.touches[0].pageX,\n        y: e.touches[0].pageY\n      }\n    }\n  }\n\n  function handleTouchEnd(e) {\n    // multitouch - ignore\n    if (e.touches.length > 1) return\n\n    // single touch - use time difference to determine if it was a touch or\n    // a swipe\n    var dt = new Date() - touchStartTime\n\n    // To long - ignore\n    if (dt > config.maxSingleTouchTime) return\n    let touch = e.changedTouches[0];\n\n    var dx = touch.pageX - startPos.x\n    var dy = touch.pageY - startPos.y\n\n    if (dx * dx + dy * dy < config.singleTapDistanceSquared) {\n      invokeHandler(touch)\n    }\n  }\n\n  function disposePrevHandler() {\n    element.removeEventListener('click', invokeHandler)\n    element.removeEventListener('touchend', handleTouchEnd)\n    element.removeEventListener('touchstart', handleTouchStart)\n  }\n\n  function invokeHandler(e) {\n    callback.call(ctx, e)\n  }\n}","import makePanzoom from 'panzoom';\nimport eventify from 'ngraph.events';\n\nimport Element from './Element';\nimport onClap from './clap';\n\nexport default makeScene;\n\n\nfunction makeScene(canvas) {\n  var width;\n  var height;\n  var drawContext = { width: 0, height: 0 };\n  var pixelRatio = window.devicePixelRatio;\n\n  var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n\n  gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  gl.enable(gl.BLEND);\n  gl.clearColor(0, 0, 0, 1.0);\n  gl.clear(gl.COLOR_BUFFER_BIT)\n\n  var sceneRoot = new Element();\n  updateCanvasSize();\n  \n  var api = eventify({\n    appendChild,\n    getSceneCoordinate,\n    getClientCoordinate,\n    getTransform,\n    getRoot,\n    removeChild,\n    setViewBox,\n    setClearColor,\n    dispose,\n    renderFrame,\n\n    getPixelRatio,\n    setPixelRatio\n  });\n\n  var panzoom = makePanzoom(canvas, {\n    zoomSpeed: 0.025,\n    controller: wglPanZoom(canvas, sceneRoot, api)\n  });\n\n  sceneRoot.bindScene(api);\n\n  var frameToken = 0;\n  var disposeClick;\n  listenToEvents();\n\n  renderFrame();\n\n  return api;\n\n  function getPixelRatio() {\n    return pixelRatio;\n  }\n\n  function setPixelRatio(newPixelRatio) {\n    pixelRatio = newPixelRatio;\n    updateCanvasSize();\n  }\n\n  function getRoot() {\n    return sceneRoot;\n  }\n\n  function getTransform() {\n    return sceneRoot.transform;\n  }\n\n  function setClearColor(r, g, b, a) {\n    gl.clearColor(r, g, b, a)\n  }\n\n  function listenToEvents() {\n    canvas.addEventListener('mousemove', onMouseMove);\n    canvas.addEventListener('transform', onTransform);\n\n    disposeClick = onClap(canvas, onMouseClick, this);\n\n    window.addEventListener('resize', onResize, true);\n  }\n\n  function dispose() {\n    canvas.removeEventListener('mousemove', onMouseMove);\n    canvas.removeEventListener('transform', onTransform);\n    if (disposeClick) disposeClick();\n\n    window.removeEventListener('resize', onResize, true);\n\n    panzoom.dispose();\n    sceneRoot.dispose();\n\n    if (frameToken) {\n      cancelAnimationFrame(frameToken);\n      frameToken = 0;\n    }\n  }\n\n  function onResize() {\n    updateCanvasSize();\n  }\n\n  function updateCanvasSize() {\n    width = canvas.width = canvas.offsetWidth * pixelRatio\n    height = canvas.height = canvas.offsetHeight * pixelRatio\n    gl.viewport(0, 0, width, height);\n\n    drawContext.width = width;\n    drawContext.height = height;\n    sceneRoot.worldTransformNeedsUpdate = true;\n    renderFrame();\n  }\n\n  function onTransform(e) {\n    api.fire('transform', e);\n  }\n  function onMouseClick(e) {\n    var p = getSceneCoordinate(e.clientX, e.clientY);\n    api.fire('click', {\n      originalEvent: e,\n      sceneX: p.x,\n      sceneY: p.y,\n    })\n  }\n\n  function onMouseMove(e) {\n    var p = getSceneCoordinate(e.clientX, e.clientY);\n    api.fire('mousemove', {\n      originalEvent: e,\n      sceneX: p.x,\n      sceneY: p.y,\n    });\n  }\n\n  function getSceneCoordinate(clientX, clientY) {\n    var t = sceneRoot.transform;\n    var canvasX = clientX * pixelRatio;\n    var canvasY = clientY * pixelRatio;\n    var x = (canvasX - t.dx)/t.scale;\n    var y = (canvasY - t.dy)/t.scale;\n\n    return {x, y};\n  }\n\n  function getClientCoordinate(sceneX, sceneY) {\n    var t = sceneRoot.transform;\n\n    var x = (sceneX * t.scale + t.dx)/pixelRatio;\n    var y = (sceneY * t.scale + t.dy)/pixelRatio;\n\n    return {x: x, y: y};\n  }\n\n  function setViewBox(rect) {\n    panzoom.showRectangle(rect)\n  }\n\n  function renderFrame() {\n    if (!frameToken) frameToken = requestAnimationFrame(frame)\n  }\n\n  function frame() {\n    gl.clear(gl.COLOR_BUFFER_BIT)\n    drawContext.wasDirty = sceneRoot.updateWorldTransform();\n    sceneRoot.draw(gl, drawContext);\n    frameToken = 0;\n//    frameToken = requestAnimationFrame(frame);\n  }\n\n  function appendChild(child, sendToBack) {\n    sceneRoot.appendChild(child, sendToBack);\n  }\n\n  function removeChild(child) {\n    sceneRoot.removeChild(child)\n  }\n}\n\nfunction wglPanZoom(canvas, sceneRoot, scene) {\n  return {\n      applyTransform(newT) {\n        var transform = sceneRoot.transform;\n        var pixelRatio = scene.getPixelRatio();\n\n        transform.dx = newT.x * pixelRatio;\n        transform.dy = newT.y * pixelRatio; \n        transform.scale = newT.scale;\n        sceneRoot.worldTransformNeedsUpdate = true;\n        scene.renderFrame()\n      },\n\n      getOwner() {\n        return canvas\n      }\n    }\n}\n","const glUtils = {\n  compile,\n  link,\n  getLocations,\n  getAttributes,\n  getUniforms,\n  initBuffer\n};\n\nexport default glUtils;\n\nfunction compile(gl, type, shaderSrc) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, shaderSrc);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw new Error(gl.getShaderInfoLog(shader));\n  }\n\n  return shader;\n}\n\nfunction link(gl, vertexShader, fragmentShader) {\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n\n  gl.linkProgram(program);\n\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    throw new Error(gl.getProgramInfoLog(program));\n  }\n\n  return program;\n}\n\nfunction getLocations(gl, program) {\n  return {\n    attributes: getAttributes(gl, program),\n    uniforms: getUniforms(gl, program)\n  }\n}\n\nfunction getAttributes(gl, program) {\n  var attributes = Object.create(null);\n\n  var numberOfAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n  for (var i = 0; i < numberOfAttributes; ++i) {\n    var name = gl.getActiveAttrib(program, i).name;\n    attributes[name] = gl.getAttribLocation(program, name)\n  }\n\n  return attributes;\n}\n\nfunction getUniforms(gl, program) {\n  var uniforms = Object.create(null);\n  var numberOfUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  for (var i = 0; i < numberOfUniforms; ++i) {\n    var name = gl.getActiveUniform(program, i).name;\n    uniforms[name] = gl.getUniformLocation(program, name)\n  }\n\n  return uniforms;\n}\n\nfunction initBuffer(gl, data, elementsPerVertex, attribute) {\n  var buffer = gl.createBuffer();\n  if (!buffer) throw new Error('Failed to create a buffer');\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n  gl.vertexAttribPointer(attribute, elementsPerVertex, gl.FLOAT, false, 0, 0);\n  gl.enableVertexAttribArray(attribute);\n}","export default {\n  /**\n   * Gets vertex shader code from a given array of shader graph nodes.\n   */\n  getVSCode: getVSCode\n};\n\nfunction getVSCode(nodes) {\n  // We just generate shader code in multiple passes.\n  let code = [] \n  nodes.forEach(node => {\n    if (node.globals) code.push(node.globals());\n  });\n  code.push('void main() {')\n  nodes.forEach(node => {\n    if (node.mainBody) code.push(node.mainBody());\n  });\n  code.push('}')\n\n  return code.join('\\n');\n}\n","export default {\n  globals() {\n    return `\nattribute vec2 aPosition;\nuniform vec2 uScreenSize;\nuniform mat4 uTransform;\n`;\n  },\n  mainBody() {\n    return `\n  mat4 transformed = mat4(uTransform);\n\n  // Translate screen coordinates to webgl space\n  vec2 vv = 2.0 * uTransform[3].xy/uScreenSize;\n  transformed[3][0] = vv.x - 1.0;\n  transformed[3][1] = 1.0 - vv.y;\n  vec2 xy = 2.0 * aPosition/uScreenSize;\n  gl_Position = transformed * vec4(xy.x, -xy.y, 0.0, 1.0);\n`\n  }\n}","export default {\n  globals() {\n    return `\nattribute float aPointSize;\nattribute vec4 aColor;\nvarying vec4 vColor;\n`;\n  },\n  mainBody() {\n    return `\n  gl_PointSize = aPointSize * transformed[0][0];\n  vColor = aColor;\n`;\n  }\n};","export default makePointsProgram;\n\nimport gl_utils from '../glUtils';\nimport shaderGraph from '../shaderGraph/index.js';\nimport panzoomVS from '../shaderGraph/panzoom';\nimport pointVS from '../shaderGraph/point';\n\nconst vertexShaderSrc = shaderGraph.getVSCode([\n  panzoomVS,\n  pointVS\n]);\n\nconst fragmentShaderSrc = `\nprecision highp float;\nvarying vec4 vColor;\nuniform sampler2D texture;\n\nvoid main() {\n  vec4 tColor = texture2D( texture, gl_PointCoord );\n  gl_FragColor = vec4(vColor.rgb, tColor.a);\n  //gl_FragColor = vec4(vColor.rgb, 1.0);\n  // vec2 t = 2.0 * gl_PointCoord - 1.0;\n  // float a = 1.0 - pow(t.x, 2.0) - pow(t.y, 2.0);\n  // gl_FragColor = vec4(vColor.rgb, a);\n}\n`;\n\nlet vertexProgramCache = new Map(); // maps from GL context to program\n\nfunction makePointsProgram(gl, data) {\n  let vertexProgram = vertexProgramCache.get(gl)\n  if (!vertexProgram) {\n    let vertexShader = gl_utils.compile(gl, gl.VERTEX_SHADER, vertexShaderSrc);\n    let fragmentShader = gl_utils.compile(gl, gl.FRAGMENT_SHADER, fragmentShaderSrc);\n    vertexProgram = gl_utils.link(gl, vertexShader, fragmentShader);\n    vertexProgramCache.set(gl, vertexProgram);\n  }\n\n  let locations = gl_utils.getLocations(gl, vertexProgram);\n\n  var buffer = gl.createBuffer();\n  if (!buffer) throw new Error('failed to create a nodesBuffer');\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, data.byteLength, gl.DYNAMIC_DRAW);\n\n  var pointTexture = createCircleTexture(gl);\n\n  var api = {\n    draw,\n    updateData,\n    dispose\n  };\n  return api;\n\n  function updateData(newData) {\n    data = newData;\n  }\n\n  function dispose() {\n    gl.deleteBuffer(buffer);\n    gl.deleteProgram(vertexProgram);\n    gl.deleteTexture(pointTexture);\n    vertexProgramCache.delete(gl);\n  }\n\n  function draw(transform, screen, count) {\n    gl.useProgram(vertexProgram);\n\n    var bpe = data.BYTES_PER_ELEMENT;\n\n    if (transform) {\n      gl.uniformMatrix4fv(locations.uniforms.uTransform, false, transform.getArray());\n    }\n    gl.uniform2f(locations.uniforms.uScreenSize, screen.width, screen.height);\n    gl.bindTexture(gl.TEXTURE_2D, pointTexture);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, data, gl.DYNAMIC_DRAW);\n\n    gl.vertexAttribPointer(locations.attributes.aPosition, 2, gl.FLOAT, false, bpe * 6, 0)\n    gl.enableVertexAttribArray(locations.attributes.aPosition)\n\n    gl.vertexAttribPointer(locations.attributes.aPointSize, 1, gl.FLOAT, false, bpe * 6, 2 * bpe)\n    gl.enableVertexAttribArray(locations.attributes.aPointSize)\n\n    gl.vertexAttribPointer(locations.attributes.aColor, 3, gl.FLOAT, false, bpe * 6, 3 * bpe)\n    gl.enableVertexAttribArray(locations.attributes.aColor);\n    gl.drawArrays(gl.POINTS, 0, count);\n  }\n}\n\nfunction createCircleTexture(gl) {\n  var pointTexture = gl.createTexture();\n  if (!pointTexture) throw new Error('Failed to create circle texture');\n  gl.bindTexture(gl.TEXTURE_2D, pointTexture);\n\n  var size = 64\n  var image = circle(size);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, size, size, 0, gl.RGBA, gl.UNSIGNED_BYTE, image);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.generateMipmap(gl.TEXTURE_2D);\n\n  return pointTexture;\n\n  function circle(size) {\n    var result = new Uint8Array(size * size * 4);\n    var r = (size - 8)/2;\n    for (var row = 0; row < size; ++row) {\n      var offset = row * size;\n      for (var col = 0; col < size; ++col) {\n        var rgbaCoord = (offset + col) * 4;\n        var cy = row - r;\n        var cx = col - r;\n        var distToCenter = Math.sqrt(cx * cx + cy * cy);\n        if (distToCenter < r) {\n          var ratio = (1 - distToCenter/r);\n          result[rgbaCoord + 3] = ratio > 0.3 ? 0xff : 0xff * ratio;\n        } else {\n          result[rgbaCoord + 3] = 0x00;\n        }\n      }\n    }\n    return blur(result, size)\n\n    //return result\n  }\n}\n\nfunction blur(src, size) {\n  var result = new Uint8Array(size * size * 4);\n  for (var row = 0; row < size; ++row) {\n    for (var col = 0; col < size; ++col) {\n      result[(row * size + col) * 4 + 3] = sample(row, col, 3, src, size);\n    }\n  }\n\n  return result;\n\n}\nfunction sample(row, col, depth, src, size) {\n  var avg = 0;\n  var count = 0;\n  for (var y = row - depth; y < row + depth; ++y) {\n    if (y < 0 || y >= size) continue;\n    for (var x = col - depth; x < col + depth; ++x) {\n      if (x < 0 || x >= size) continue;\n\n      avg += src[(y * size + x) * 4 + 3];\n      count += 1;\n    }\n  }\n\n  return avg/count;\n}","class Color {\n  constructor(r, g, b, a) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a === undefined ? 1 : a\n  }\n}\n\nexport default Color;","import Color from '../Color';\n\nclass PointAccessor {\n  constructor(buffer, offset, color, data) {\n    this.offset = offset;\n    this.buffer = buffer;\n    this.color = color || new Color(1, 1, 1, 1); \n    if (data !== undefined) {\n      this.data = data;\n    }\n  }\n\n  get x() {\n    return this.buffer[this.offset];\n  }\n\n  get y() {\n    return this.buffer[this.offset + 1];\n  }\n\n  update(point, defaults) {\n    var offset = this.offset;\n    var points = this.buffer;\n\n    points[offset + 0] = point.x;\n    points[offset + 1] = point.y;\n    if (point.size || defaults) {\n      points[offset + 2] = typeof point.size === 'number' ? point.size : defaults.size;\n    }\n\n    this.setColor(this.color);\n  }\n\n  setColor(color) {\n    this.color = color;\n    // TODO: This is waste, we can store rgba in 32 bits, not in the 3 * 3 * 8 bits?\n    this.buffer[this.offset + 3] = color.r\n    this.buffer[this.offset + 4] = color.g\n    this.buffer[this.offset + 5] = color.b\n  }\n}\n\nexport default PointAccessor;","var ITEMS_PER_POINT = 6;  // x, y, size, r, g, b\n\nimport makeNodeProgram from './makePointsProgram';\nimport Element from '../Element';\nimport Color from '../Color';\nimport PointAccessor from './PointAccessor';\n\nclass PointCollection extends Element {\n  constructor(capacity) {\n    super();\n    this.type = 'PointCollection';\n\n    // TODO: Not sure I like this too much. But otherwise how can I track interactivity?\n    this.pointsAccessor = [];\n\n    this.capacity = capacity;\n    this.pointsBuffer = new Float32Array(capacity * ITEMS_PER_POINT);\n    this.count = 0;\n    this._program = null;\n    this.color = new Color(1, 1, 1, 1);\n    this.size = 1;\n  }\n\n  draw(gl, screen) {\n    if (!this._program) {\n      this._program = makeNodeProgram(gl, this.pointsBuffer);\n    }\n\n    this._program.draw(this.worldTransform, screen, this.count);\n  }\n\n  dispose() {\n    if (this._program) {\n      this._program.dispose();\n      this._program = null;\n    }\n  }\n\n  add(point, data) {\n    if (!point) throw new Error('Point is required');\n\n    if (this.count >= this.capacity)  {\n      this._extendArray();\n    }\n    let pointsBuffer = this.pointsBuffer;\n    let internalNodeId = this.count;\n    let offset = internalNodeId * ITEMS_PER_POINT;\n    let pointAccessor = new PointAccessor(pointsBuffer, offset, point.color || this.color, data);\n\n    this.pointsAccessor.push(pointAccessor);\n\n    pointAccessor.update(point, this)\n\n    this.count += 1;\n    return pointAccessor\n  }\n\n  _extendArray() {\n    // This is because we would have to track every created point accessor\n    // TODO: Whelp, a week older you thinks that we should be tracking the points\n    // for interactivity... So, might as well implement this stuff. Remember anything\n    // about premature optimization?\n    throw new Error('Cannot extend array at the moment :(')\n  }\n}\n\nexport default PointCollection;\n","import Color from '../Color';\n\nclass Point {\n  constructor(x, y, size) {\n    if (Number.isNaN(x)) throw new Error('x is not a number');\n    if (Number.isNaN(y)) throw new Error('y is not a number');\n\n    this.x = x;\n    this.y = y;\n    this.color = new Color(255, 255, 255)\n\n    this.size = Number.isFinite(size) ? size : 4;\n  }\n}\n\nexport default Point;","import Color from '../Color';\nimport Element from '../Element';\n\nclass BaseLineCollection extends Element {\n  constructor(capacity, itemsPerLine) {\n    super();\n\n    this.itemsPerLine = itemsPerLine;\n    this.capacity = capacity;\n    this.count = 0;\n    this._program = null;\n    this.color = new Color(1, 1, 1, 1);\n    this.buffer = new Float32Array(capacity * this.itemsPerLine);\n  }\n\n  draw(gl, screen) {\n    if (!this._program) {\n      this._program = this._makeProgram(gl);\n    }\n    let transform = this.worldTransform;\n\n    this._program.draw(transform, this.color, screen);\n  }\n\n  _makeProgram() {\n    throw new Error('Not implemented');\n  }\n\n  _addInternal() {\n    throw new Error('Not implemented');\n  }\n\n  add(line) {\n    if (!line) throw new Error('Line is required');\n\n    if (this.count >= this.capacity)  {\n      this._extendArray();\n    }\n\n    var offset = this.count * this.itemsPerLine;\n    var ui = this._addInternal(line, offset);\n\n    this.count += 1;\n    return ui;\n  }\n\n  dispose() {\n    if (this._program) {\n      this._program.dispose();\n      this._program = null;\n    }\n  }\n\n  _extendArray() {\n    // Every time we run out of space create new array twice bigger.\n    var newCapacity = this.capacity * this.itemsPerLine * 2;\n    var extendedArray = new Float32Array(newCapacity);\n    if (this.buffer) {\n      extendedArray.set(this.buffer);\n    }\n\n    this.buffer = extendedArray;\n    this.capacity = newCapacity;\n  }\n}\n\nexport default BaseLineCollection;","import gl_utils from '../glUtils';\n\nexport default makeLineProgram;\n\nimport shaderGraph from '../shaderGraph/index.js';\nimport panzoomVS from '../shaderGraph/panzoom.js';\n\nconst lineVSSrc = shaderGraph.getVSCode([\n  panzoomVS\n]);\n\nconst lineFSSrc = `\nprecision highp float;\nuniform vec4 uColor;\n\nvoid main() {\n  gl_FragColor = uColor;\n}\n`;\n\n// TODO: this needs to be in a separate file, with proper resource management\nlet lineProgramCache = new Map(); // maps from GL context to program\n\nfunction makeLineProgram(gl, data, drawTriangles) {\n  let lineProgram = lineProgramCache.get(gl)\n  if (!lineProgram) {\n    var lineVSShader = gl_utils.compile(gl, gl.VERTEX_SHADER, lineVSSrc);\n    var lineFSShader = gl_utils.compile(gl, gl.FRAGMENT_SHADER, lineFSSrc);\n    lineProgram = gl_utils.link(gl, lineVSShader, lineFSShader);\n    lineProgramCache.set(gl, lineProgram);\n  }\n\n  var locations = gl_utils.getLocations(gl, lineProgram);\n\n  var lineBuffer = gl.createBuffer();\n  var bpe = data.BYTES_PER_ELEMENT;\n  var drawType = drawTriangles ? gl.TRIANGLES : gl.LINES;\n  gl.bindBuffer(gl.ARRAY_BUFFER, lineBuffer)\n  gl.bufferData(gl.ARRAY_BUFFER, data.byteLength, gl.STATIC_DRAW);\n  gl.bufferSubData(gl.ARRAY_BUFFER, 0, data);\n\n  var api = {\n    draw,\n    dispose\n  }\n\n  return api;\n\n  function dispose() {\n    gl.deleteBuffer(lineBuffer);\n    gl.deleteProgram(lineProgram);\n    lineProgramCache.delete(gl);\n  }\n\n  function draw(transform, color, screen) {\n    if (data.length === 0) return;\n\n    gl.useProgram(lineProgram);\n\n    gl.uniformMatrix4fv(locations.uniforms.uTransform, false, transform.getArray());\n    gl.uniform2f(locations.uniforms.uScreenSize, screen.width, screen.height);\n    gl.uniform4f(locations.uniforms.uColor, color.r, color.g, color.b, color.a);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, lineBuffer);\n    gl.enableVertexAttribArray(locations.attributes.aPosition)\n    // TODO: Avoid buffering, if data hasn't changed?\n    // gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n    gl.vertexAttribPointer(locations.attributes.aPosition, 2, gl.FLOAT, false, bpe * 2, 0)\n\n    gl.drawArrays(drawType, 0, data.length / 2);\n  }\n}\n","class LineAccessor {\n  constructor(buffer, offset) {\n    this.offset = offset;\n    this.buffer = buffer;\n    this.width = 1;\n  }\n\n  setWidth(width) {\n    this.width = width;\n  }\n\n  update(from, to) {\n    var buffer = this.buffer;\n    var offset = this.offset;\n\n    var dx = to.x - from.x\n    var dy = to.y - from.y\n    if (dx === 0) dx = 1e-4;\n    if (dy === 0) dy = 1e-4;\n\n    var norm = Math.sqrt(dx * dx + dy * dy);\n    var u = dx/norm;\n    var v = dy/norm;\n\n    let width = this.width;\n    let uw = width * u;\n    let vw = width * v;\n    var x0 = from.x + vw;\n    var y0 = from.y - uw;\n    var x1 = to.x + vw;\n    var y1 = to.y - uw;\n    var x2 = from.x - vw;\n    var y2 = from.y + uw;\n    var x3 = to.x - vw;\n    var y3 = to.y + uw;\n\n    // Start\n    buffer[offset + 0] = x0\n    buffer[offset + 1] = y0\n\n    buffer[offset + 2] = x1\n    buffer[offset + 3] = y1\n\n    buffer[offset + 4] = x2\n    buffer[offset + 5] = y2\n\n    offset += 6\n\n    // End\n    buffer[offset + 0] = x1\n    buffer[offset + 1] = y1\n\n    buffer[offset + 2] = x2\n    buffer[offset + 3] = y2\n\n    buffer[offset + 4] = x3\n    buffer[offset + 5] = y3\n    // buffer[offset + 0] = from.x\n    // buffer[offset + 1] = from.y\n\n    // buffer[offset + 2] = to.x\n    // buffer[offset + 3] = to.y\n  }\n}\n\nexport default LineAccessor;","import BaseLineCollection from './BaseLineCollection';\nimport makeLinesProgram from './makeLinesProgram';\nimport LineAccessor from './LineAccessor';\n\n/**\n * Lines have varying thickness. That comes at extra price: Each line\n * requires additional space in buffer, as it is rendered as triangles\n */\nclass LineCollection extends BaseLineCollection {\n  constructor(capacity) {\n    super(capacity, 12); // items per thick line\n    this.type = 'LineCollection';\n  }\n\n  _makeProgram(gl) {\n    return makeLinesProgram(gl, this.buffer, /* drawTriangles = */ true);\n  }\n\n  _addInternal(line, offset) {\n    // TODO: width\n    let lineUI = new LineAccessor(this.buffer, offset);\n    lineUI.update(line.from, line.to)\n    return lineUI;\n  }\n}\n\nexport default LineCollection;","/**\n * Wire accessor provides access to the buffer that stores wires.\n * \n * Wires are \"lines\" with 1.0 width.\n */\nclass WireAccessor {\n  constructor(buffer, offset) {\n    this.offset = offset;\n    this.buffer = buffer;\n  }\n\n  update(from, to) {\n    var buffer = this.buffer;\n    var offset = this.offset;\n\n    buffer[offset + 0] = from.x\n    buffer[offset + 1] = from.y\n\n    buffer[offset + 2] = to.x\n    buffer[offset + 3] = to.y\n  }\n}\n\nexport default WireAccessor;","import BaseLineCollection from './BaseLineCollection';\nimport makeLinesProgram from './makeLinesProgram';\nimport WireAccessor from './WireAccessor';\n\n/**\n * Unlike lines, wires do not have width, and are always 1px wide, regardless\n * of resolution.\n */\nclass WireCollection extends BaseLineCollection {\n  constructor(capacity) {\n    super(capacity, 4); // items per wire\n\n    this.type = 'WireCollection';\n  }\n\n  _makeProgram(gl) {\n    return makeLinesProgram(gl, this.buffer, /* drawTriangles = */ false);\n  }\n\n  _addInternal(line, offset) {\n    let lineUI = new WireAccessor(this.buffer, offset);\n    lineUI.update(line.from, line.to)\n    return lineUI;\n  }\n}\n\nexport default WireCollection;","export default isWebGLEnabled;\n\nfunction isWebGLEnabled(canvas) {\n  try {\n    if (!window.WebGLRenderingContext) return false;\n    if (!canvas) canvas = document.createElement('canvas');\n    return !!(canvas.getContext('webgl') || canvas.getContext('experimental-webgl'));\n  } catch (e) {\n    return false;\n  }\n}\n"],"names":["BezierEasing","noop","makeSvgController","require$$0","domController","makeDomController","transform","Transform","kinetic","animate","createEvent","this","onClap","let","makeScene","eventify","panzoom","makePanzoom","const","makePointsProgram","gl_utils","prototypeAccessors","super","makeNodeProgram","makeLinesProgram","isWebGLEnabled"],"mappings":"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"}